<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>AssetsAdmin</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library AssetsAdmin</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab107"></a><h1 class="section">Asset Admins part of the Minter Contract (THIS FILE IS OBSOLETE, SINCE FUNCTIONALITY WAS MOVED TO THE FA2 TOKENS CONTRACT)</h1>
 This file contains the implementation of the Assets Admin part of the Minter Contract
    The contracts handles all incoming calls that manages admin functionality for the assets. Such as for example changing the admin, minter or pausing tokens.
    The file this file has been translated from can be found here:
    https://github.com/bender-labs/wrap-tz-contracts/blob/1655949e61b05a1c25cc00dcb8c1da9d91799f31/ligo/minter/assets_admin.mligo 

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Tokens_Lib</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Blockchain</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">FA2Interface_Wrap</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">ZArith</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Storage</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">List</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Serializable</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">AssetsAdmin</span>.<br/>
<span class="id" title="keyword">Context</span> {<span class="id" title="var">BaseTypes</span> : <span class="id" title="var">ChainBase</span>}.<br/>

<br/>
</div>

<div class="doc">
<a name="lab108"></a><h2 class="section">Parameters for the Pause_tokens endpoint</h2>

</div>
<div class="code">
<span class="id" title="keyword">Record</span> <span class="id" title="var">PauseTokensParam</span> := <span class="id" title="var">mkPauseTokensParam</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ptp_contract</span> : <span class="id" title="var">Address</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ptp_tokens</span> : <span class="id" title="var">list</span> <span class="id" title="var">N</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ptp_paused</span> : <span class="id" title="var">bool</span><br/>
}.<br/>

<br/>
</div>

<div class="doc">
<a name="lab109"></a><h2 class="section">Asset Admin Entrypoints</h2>

</div>
<div class="code">
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">AssetAdminentrypoints</span> : <span class="id" title="keyword">Type</span> :=<br/>
| <span class="id" title="var">Change_tokens_administrator</span> (<span class="id" title="var">param</span> : (<span class="id" title="var">Address</span>  * <span class="id" title="var">list</span> <span class="id" title="var">Address</span>))<br/>
| <span class="id" title="var">Confirm_tokens_administrator</span> (<span class="id" title="var">addrList</span> : <span class="id" title="var">list</span> <span class="id" title="var">Address</span>)<br/>
| <span class="id" title="var">Pause_tokens</span> (<span class="id" title="var">params</span> : <span class="id" title="var">list</span> <span class="id" title="var">PauseTokensParam</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab110"></a><h2 class="section">The Return type</h2>
 This type is return from all of the above entrypoints 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Return</span> : <span class="id" title="keyword">Type</span> := (<span class="id" title="var">list</span> <span class="id" title="var">ActionBody</span> * <span class="id" title="var">AssetsStorage</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab111"></a><h2 class="section">Confirms a newly selected admin</h2>

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">confirm_admin</span> (<span class="id" title="var">p</span> : <span class="id" title="var">list</span> <span class="id" title="var">Address</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">AssetsStorage</span>) : <span class="id" title="var">Return</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">create_op</span> : <span class="id" title="var">Address</span> -&gt; <span class="id" title="var">ActionBody</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span> : <span class="id" title="var">Address</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">act_call</span> <span class="id" title="var">a</span> 0 (<span class="id" title="var">serialize</span> <span class="id" title="var">Confirm_admin</span>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ops</span> := <span class="id" title="var">map</span> <span class="id" title="var">create_op</span> <span class="id" title="var">p</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ops</span>, <span class="id" title="var">s</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab112"></a><h2 class="section">Pauses a token</h2>

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pause_tokens_in_contract</span> (<span class="id" title="var">p</span> : <span class="id" title="var">PauseTokensParam</span>) : <span class="id" title="var">ActionBody</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">params</span> := <span class="id" title="var">map</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">token_id</span> : <span class="id" title="var">N</span>) =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <span class="id" title="var">pp_token_id</span> := <span class="id" title="var">token_id</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pp_paused</span> := <span class="id" title="var">p</span>.(<span class="id" title="var">ptp_paused</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|}) <span class="id" title="var">p</span>.(<span class="id" title="var">ptp_tokens</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">act_call</span> <span class="id" title="var">p</span>.(<span class="id" title="var">ptp_contract</span>) 0 (<span class="id" title="var">serialize</span> (<span class="id" title="var">Pause</span> <span class="id" title="var">params</span>)).<br/>

<br/>
</div>

<div class="doc">
<a name="lab113"></a><h2 class="section">Pauses multiple tokens</h2>

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pause_tokens</span> (<span class="id" title="var">p</span> : <span class="id" title="var">list</span> <span class="id" title="var">PauseTokensParam</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">AssetsStorage</span>) : <span class="id" title="var">Return</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ops</span> := <span class="id" title="var">map</span> <span class="id" title="var">pause_tokens_in_contract</span> <span class="id" title="var">p</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ops</span>, <span class="id" title="var">s</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab114"></a><h2 class="section">Change the tokens administrator</h2>

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">change_tokens_administator</span> (<span class="id" title="var">p</span> : (<span class="id" title="var">Address</span> * <span class="id" title="var">list</span> <span class="id" title="var">Address</span>)) (<span class="id" title="var">s</span> : <span class="id" title="var">AssetsStorage</span>) : <span class="id" title="var">Return</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<span class="id" title="var">new_admin</span>, <span class="id" title="var">contracts</span>) := <span class="id" title="var">p</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">create_op</span> : <span class="id" title="var">Address</span> -&gt; <span class="id" title="var">ActionBody</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<span class="id" title="var">a</span> : <span class="id" title="var">Address</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">act_call</span> <span class="id" title="var">a</span> 0 (<span class="id" title="var">serialize</span> (<span class="id" title="var">Set_admin</span> <span class="id" title="var">new_admin</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">ops</span> := <span class="id" title="var">map</span> <span class="id" title="var">create_op</span> <span class="id" title="var">contracts</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ops</span>, <span class="id" title="var">s</span>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab115"></a><h2 class="section">The main entrypoint for the assets admin</h2>

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">assets_admin_main</span> (<span class="id" title="var">p</span> : <span class="id" title="var">AssetAdminentrypoints</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">AssetsStorage</span>) : <span class="id" title="var">Return</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">p</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Change_tokens_administrator</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">change_tokens_administator</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Confirm_tokens_administrator</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">confirm_admin</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Pause_tokens</span> <span class="id" title="var">p</span> =&gt; <span class="id" title="var">pause_tokens</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">AssetsAdmin</span>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>